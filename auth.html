<script>
let currentTab = 'signup';

function switchTab(tab) {
    currentTab = tab;
    
    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
    document.querySelector(`.auth-tab:nth-child(${tab === 'signup' ? '1' : '2'})`).classList.add('active');
    
    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
    document.getElementById(tab + 'Form').classList.add('active');
    
    const switchText = document.getElementById('switchText');
    const switchLink = document.getElementById('switchLink');
    
    if (tab === 'signup') {
        switchText.textContent = 'Already have an account?';
        switchLink.textContent = 'Log in';
        switchLink.onclick = () => switchTab('login');
    } else {
        switchText.textContent = "Don't have an account?";
        switchLink.textContent = 'Sign up';
        switchLink.onclick = () => switchTab('signup');
    }
    
    hideMessages();
}

function togglePassword(fieldId) {
    const field = document.getElementById(fieldId);
    const button = field.nextElementSibling;
    
    if (field.type === 'password') {
        field.type = 'text';
        button.textContent = 'Hide';
    } else {
        field.type = 'password';
        button.textContent = 'Show';
    }
}

function showError(message) {
    const errorDiv = document.getElementById('errorMessage');
    errorDiv.textContent = message;
    errorDiv.style.display = 'block';
    document.getElementById('successMessage').style.display = 'none';
}

function showSuccess(message) {
    const successDiv = document.getElementById('successMessage');
    successDiv.textContent = message;
    successDiv.style.display = 'block';
    document.getElementById('errorMessage').style.display = 'none';
}

function hideMessages() {
    document.getElementById('errorMessage').style.display = 'none';
    document.getElementById('successMessage').style.display = 'none';
}

function validateSignup(formData) {
    if (formData.password !== formData.confirmPassword) {
        return 'Passwords do not match';
    }
    
    if (formData.password.length < 8) {
        return 'Password must be at least 8 characters long';
    }
    
    if (!formData.terms) {
        return 'You must agree to the Terms of Service';
    }
    
    return null;
}

function socialLogin(provider) {
    showError(`${provider} login will be available soon. Please use email registration for now.`);
}

function showForgotPassword() {
    const email = document.getElementById('loginEmail').value;
    if (email) {
        showSuccess(`Password reset instructions will be sent to ${email}`);
    } else {
        showError('Please enter your email address first');
    }
}

// Form submissions
document.getElementById('signupForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const data = Object.fromEntries(formData);
    
    const error = validateSignup(data);
    if (error) {
        showError(error);
        return;
    }
    
    showSuccess('Account created successfully! Redirecting to your dashboard...');
    
    setTimeout(() => {
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const email = document.getElementById('email').value;
        
        localStorage.setItem('userLoggedIn', 'true');
        localStorage.setItem('userName', firstName + ' ' + lastName);
        localStorage.setItem('userEmail', email);
        localStorage.setItem('userPlan', 'Premium Trial');
        localStorage.setItem('trialStartDate', new Date().toISOString());
        window.location.href = 'app.html';
    }, 2000);
});

document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const data = Object.fromEntries(formData);
    
    if (!data.email || !data.password) {
        showError('Please enter both email and password');
        return;
    }
    
    showSuccess('Logging in...');
    
    setTimeout(() => {
        localStorage.setItem('userLoggedIn', 'true');
        window.location.href = 'app.html';
    }, 1500);
});

hideMessages();
</script>
